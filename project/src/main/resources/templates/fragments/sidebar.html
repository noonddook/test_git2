<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- 
  [핵심 1] th:fragment="sidebarFragment(activeMenu)"
  이 프래그먼트는 'activeMenu'라는 이름의 파라미터를 받을 수 있습니다.
-->
<aside class="sidebar" th:fragment="sidebarFragment(activeMenu)">
    <div class="profile" sec:authorize="isAuthenticated()">
        <div class="logo-circle"></div>
        <p sec:authentication="name">User_ID</p>
    </div>
    <nav class="menu">
        <ul>
            <!-- 
              [핵심 2] th:classappend
              'activeMenu' 변수값이 'trade'와 같으면 'is-active' 클래스를 이 li 태그에 추가합니다.
              (프론트 코드를 보니 '거래' 메뉴 전체가 활성화되어야 할 때가 있는 것 같아 추가했습니다.)
            -->
            <li class="menu-item"
                th:classappend="${#lists.contains({'fwdRequest', 'my-posted-requests', 'my-offers', 'container-inquiry', 'transaction_history'}, activeMenu)} ? 'is-active' : ''">
                <a href="#">거래</a>
                <ul class="submenu">
                    <!-- 
                      [핵심 3] 각 서브메뉴에도 조건을 적용합니다.
                      'activeMenu' 값이 'fwdRequest'와 같으면 'is-active' 클래스를 이 a 태그에 추가합니다.
                    -->
                    <li><a th:href="@{/fwd/fwdRequest}"
                            th:classappend="${activeMenu == 'fwdRequest'} ? 'is-active' : ''">견적요청조회</a></li>
                    <li><a th:href="@{/fwd/my-posted-requests}"
                            th:classappend="${activeMenu == 'my-posted-requests'} ? 'is-active' : ''">나의요청조회</a></li>
                    <li><a th:href="@{/fwd/my-offers}"
                            th:classappend="${activeMenu == 'my-offers'} ? 'is-active' : ''">나의제안조회</a></li>
                    <li><a th:href="@{/fwd/container-inquiry}"
                            th:classappend="${activeMenu == 'container-inquiry'} ? 'is-active' : ''">컨테이너조회</a></li>
                    <li><a th:href="@{/fwd/transaction_history}"
                            th:classappend="${activeMenu == 'transaction_history'} ? 'is-active' : ''">나의거래내역</a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="#">결제</a>
            </li>
            <li class="menu-item">
                <a href="#">전자계약</a>
            </li>
        </ul>
    </nav>
</aside>

</html>